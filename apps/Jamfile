#

FITZLIBS = libmupdf libbase libstream libworld libraster libfonts ;

SubDir TOP apps ;
Main pdftool : pdftool.c ;
LinkLibraries pdftool : $(FITZLIBS) ;

SubDir TOP apps common ;
Library libpdfapp : pdfapp.c ;

if $(BUILD_WINAPP) = yes
{
    SubDir TOP apps windows ;
    Main pdfview : winmain.c winres.rc ;
    LinkLibraries pdfview : libpdfapp $(FITZLIBS) ;
    LINKLIBS on pdfview$(SUFEXE) = $(LINKLIBS) $(WINLIBS) ;
}

if $(BUILD_X11APP) = yes
{
    SubDir TOP apps unix ;
    Main pdfview : x11pdf.c ximage.c ;
    LinkLibraries pdfview : libpdfapp $(FITZLIBS) ;
    LINKLIBS on pdfview$(SUFEXE) = $(LINKLIBS) $(X11LIBS) ;
}

if $(BUILD_PLUGIN) = yes
{
    SubDir TOP apps mozilla ;
    SUFEXE on npmupdf.dll = ;
    LINKFLAGS on npmupdf.dll = $(LINKFLAGS) -shared -Wl,--kill-at ;
    LINKLIBS on npmupdf.dll = $(LINKLIBS) -lgdi32 ;
    Main npmupdf.dll : npwin.c moz_winres.rc moz_main.c ;
    LinkLibraries npmupdf.dll : $(FITZLIBS) ;
}

